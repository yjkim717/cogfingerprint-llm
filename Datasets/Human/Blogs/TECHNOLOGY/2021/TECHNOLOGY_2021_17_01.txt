Year: 2021
Author: Wobblycogs
URL: https://www.reddit.com/r/javahelp/comments/ojfnby/change_in_regex_processing_across_vm_versions/

I have an application that makes heavy use of regex. I'm in the process of migrating it from Java 8 to 11 and I've found one of the expressions is failing to match content where it worked fine before. In it's simplest case I just want to match a simple number but it may also need to match numbers formatted in scientific notation hence the expression (the real data comes from Excel). Running under Java 8 (Adopt) the code below shows both patterns matching. Under Java 11 and 16 the first pattern doesn't match but the second, simple one, does. What gives? The only variable here is the VM version so I'm assuming something got fixed (or broken) from version 8 to version 11. Is it me (likely) or the VM that's wrong? Cheers. import java.util.regex.Pattern; public class RegexTest { public static void main( String[] args ) { System.out.println( System.getProperty("java.version") ); String[] patterns = new String[]{ "[^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$]+", "^\\d+$" }; String value = "7"; for( String p : patterns ) { Pattern pattern = Pattern.compile(p); boolean matches = pattern.matcher(value).matches(); System.out.println( p + " matches: " + matches); } } }
