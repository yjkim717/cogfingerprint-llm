Year: 2021
Author: drowningfish
URL: https://www.reddit.com/r/vmware/comments/p9j0or/horizon_view_on_vsan_component_limitation_of_9000/

View 7.12 / VCenter 7/VSAN 7.0a Wondering if any of you folks could help with a capacity issue I am seeing on my View Cluster. The limit per Host is 9000 Components. I have six hosts in this cluster with 600 desktops, with an average of 550 active concurrent sessions. Each of my hosts are at 97-99% capacity for Component, and when they start hitting 100% I begin seeing provisioning errors in View. Is there something I can do to clean things up? When I stood this Pod up last year, the Component limit was way under 50% across all the hosts, so I'm thinking I have something in the background aggregating over time that could be flushed out to bring me back down to this comfort level. It's either I'm missing something here that needs maintenance, or I will have to get an additional host to scale up my capacity which will be a cost I didn't originally plan on having since the original specifications for this Build was for 600 Instant Clones. Thoughts? Edit 01/05/2022: Turns out the issue was with Horizon not deleting some vmdk files, leaving them behind and accumulating over time leading to a capacity issue on component objects. You can locate these files through the vsan.obj_status_report -t . command under the UNASSOCIATED OBJECTS section. I catalogued these UUIDs and proceeded with deleting them all and went from 99-100% component usage to under 8%. Horizon is still leaving files behind, so I will need to routinely monitor this to prevent hitting the cap again and causing provisioning issues.
