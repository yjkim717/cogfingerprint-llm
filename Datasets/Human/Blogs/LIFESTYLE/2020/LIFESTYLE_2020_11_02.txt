Year: 2020
Author: forwardslashroot
URL: https://www.reddit.com/r/homelab/comments/g9yb8r/raspberry_pi_kubernetes_networking/

Hi, I am new to Kubernetes and planning to move my Docker containers from my NAS to 5 Raspberry Pi 4 in Kubernetes k3s or k8s. Since all the containers that I use are from Linuxserver, the Linuxserver folks support the armhf and arm64 version, so hopefully, it would be an easy migration. My ideal setup would be 3x master in x86 VM and use all 5x RPi4 as workers. If the ideal setup is too complicated or not possible then one of the RPi4 will be master and 4x will be the worker nodes. My questions are mostly related to the networking portion. I prefer my docker containers to have their own IP instead of bridging because my network is segmented into VLANs / firewall zones. I would also like to use an NFS share directory from my NAS for the containers' /config. 1. How can deploy the DHCP server per VLAN? 1. Is this done within Kubernetes? 1. If that is a yes, how can I use my firewall to segment the containers per firewall zone? 2. Do I need to set up a trunk link on the switch for each RPi4 to support 802.1q? 3. For the /config plan, do I need to add the NFS share to each RPi4 fstab or just on the master node? 4. What OS are you using on your Kubernetes RPi? 5. How do you update your RPi? Is it `apt update && apt dist-upgrade`? &#x200B; What do you use for RPi4 PoE hat? If you are using the official PoE hat, is there a enough space for 4mm heatsink? I have been printing a rack mount for my RPis, but trying to decide if I should get the official poe hat or 3rd party poe hat. Thanks
